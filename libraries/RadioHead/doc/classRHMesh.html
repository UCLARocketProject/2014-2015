<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>RadioHead: RHMesh Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RadioHead
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classRHMesh-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">RHMesh Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classRHRouter.html" title="RHReliableDatagram subclass for sending addressed, optionally acknowledged datagrams multi-hop routed...">RHRouter</a> subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a network, with automatic route discovery.  
 <a href="classRHMesh.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="RHMesh_8h_source.html">RHMesh.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for RHMesh:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classRHMesh.png" usemap="#RHMesh_map" alt=""/>
  <map id="RHMesh_map" name="RHMesh_map">
<area href="classRHRouter.html" title="RHReliableDatagram subclass for sending addressed, optionally acknowledged datagrams multi-hop routed..." alt="RHRouter" shape="rect" coords="0,112,128,136"/>
<area href="classRHReliableDatagram.html" title="RHDatagram subclass for sending addressed, acknowledged, retransmitted datagrams. ..." alt="RHReliableDatagram" shape="rect" coords="0,56,128,80"/>
<area href="classRHDatagram.html" title="Manager class for addressed, unreliable messages. " alt="RHDatagram" shape="rect" coords="0,0,128,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRHMesh_1_1MeshApplicationMessage.html">MeshApplicationMessage</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signals an application layer message for the caller of <a class="el" href="classRHMesh.html" title="RHRouter subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a ...">RHMesh</a>.  <a href="structRHMesh_1_1MeshApplicationMessage.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRHMesh_1_1MeshMessageHeader.html">MeshMessageHeader</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure of the basic <a class="el" href="classRHMesh.html" title="RHRouter subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a ...">RHMesh</a> header.  <a href="structRHMesh_1_1MeshMessageHeader.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html">MeshRouteDiscoveryMessage</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signals a route discovery request or reply (At present only supports physical dest addresses of length 1 octet)  <a href="structRHMesh_1_1MeshRouteDiscoveryMessage.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRHMesh_1_1MeshRouteFailureMessage.html">MeshRouteFailureMessage</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signals a route failure.  <a href="structRHMesh_1_1MeshRouteFailureMessage.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5a6e3fc56274ba3dc6bbb569dae83adf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHMesh.html#a5a6e3fc56274ba3dc6bbb569dae83adf">RHMesh</a> (<a class="el" href="classRHGenericDriver.html">RHGenericDriver</a> &amp;driver, uint8_t <a class="el" href="classRHDatagram.html#a4749623dde8ada6dc6e18b32e3e8ed8f">thisAddress</a>=0)</td></tr>
<tr class="separator:a5a6e3fc56274ba3dc6bbb569dae83adf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dcb42be25d06b69a85e27189822fbc6"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHMesh.html#a9dcb42be25d06b69a85e27189822fbc6">sendtoWait</a> (uint8_t *buf, uint8_t len, uint8_t dest, uint8_t flags=0)</td></tr>
<tr class="separator:a9dcb42be25d06b69a85e27189822fbc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae39d1157f0fbf26a6a9457aaefcc7092"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHMesh.html#ae39d1157f0fbf26a6a9457aaefcc7092">recvfromAck</a> (uint8_t *buf, uint8_t *len, uint8_t *source=NULL, uint8_t *dest=NULL, uint8_t *id=NULL, uint8_t *flags=NULL)</td></tr>
<tr class="separator:ae39d1157f0fbf26a6a9457aaefcc7092"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9865f97a80de0566d892286fb0be069"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHMesh.html#ad9865f97a80de0566d892286fb0be069">recvfromAckTimeout</a> (uint8_t *buf, uint8_t *len, uint16_t timeout, uint8_t *source=NULL, uint8_t *dest=NULL, uint8_t *id=NULL, uint8_t *flags=NULL)</td></tr>
<tr class="separator:ad9865f97a80de0566d892286fb0be069"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classRHRouter"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classRHRouter')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classRHRouter.html">RHRouter</a></td></tr>
<tr class="memitem:a1d3035a08a0d09a5aaca3d29a41df2be inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a1d3035a08a0d09a5aaca3d29a41df2be">RHRouter</a> (<a class="el" href="classRHGenericDriver.html">RHGenericDriver</a> &amp;driver, uint8_t <a class="el" href="classRHDatagram.html#a4749623dde8ada6dc6e18b32e3e8ed8f">thisAddress</a>=0)</td></tr>
<tr class="separator:a1d3035a08a0d09a5aaca3d29a41df2be inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb2c05984049e312d1b9b534d4b396cd inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#afb2c05984049e312d1b9b534d4b396cd">init</a> ()</td></tr>
<tr class="separator:afb2c05984049e312d1b9b534d4b396cd inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805546143514cce2e4d792d7f9220f0e inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a805546143514cce2e4d792d7f9220f0e">setMaxHops</a> (uint8_t max_hops)</td></tr>
<tr class="separator:a805546143514cce2e4d792d7f9220f0e inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82c639a2d6bb32d0f86f63da12baa7bd inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a82c639a2d6bb32d0f86f63da12baa7bd">addRouteTo</a> (uint8_t dest, uint8_t next_hop, uint8_t state=<a class="el" href="classRHRouter.html#ad7f86ccf28df6efb61e39dbe8677fa11a99d4fdf872c93b39849991f8e7a555a8">Valid</a>)</td></tr>
<tr class="separator:a82c639a2d6bb32d0f86f63da12baa7bd inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9963186db7d5b88c4e6c212ffe2b07b inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structRHRouter_1_1RoutingTableEntry.html">RoutingTableEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#af9963186db7d5b88c4e6c212ffe2b07b">getRouteTo</a> (uint8_t dest)</td></tr>
<tr class="separator:af9963186db7d5b88c4e6c212ffe2b07b inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70bff09a403c8f6203ccf484f2ebc581 inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a70bff09a403c8f6203ccf484f2ebc581">deleteRouteTo</a> (uint8_t dest)</td></tr>
<tr class="separator:a70bff09a403c8f6203ccf484f2ebc581 inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a958eaae62e1c0a0586ab80a455ba91ba inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a958eaae62e1c0a0586ab80a455ba91ba">retireOldestRoute</a> ()</td></tr>
<tr class="separator:a958eaae62e1c0a0586ab80a455ba91ba inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fb2cc15a70b9de2d5bb6b377b5cb3db inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a2fb2cc15a70b9de2d5bb6b377b5cb3db">clearRoutingTable</a> ()</td></tr>
<tr class="separator:a2fb2cc15a70b9de2d5bb6b377b5cb3db inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102858b7d649eac02c1f6b83901fd3f4 inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a102858b7d649eac02c1f6b83901fd3f4">printRoutingTable</a> ()</td></tr>
<tr class="separator:a102858b7d649eac02c1f6b83901fd3f4 inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ac935defd2418f45a4d9f391f7e0384 inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a7ac935defd2418f45a4d9f391f7e0384">sendtoWait</a> (uint8_t *buf, uint8_t len, uint8_t dest, uint8_t flags=0)</td></tr>
<tr class="separator:a7ac935defd2418f45a4d9f391f7e0384 inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04ae267662e9f3c4629f0e7469d387c7 inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a04ae267662e9f3c4629f0e7469d387c7">sendtoFromSourceWait</a> (uint8_t *buf, uint8_t len, uint8_t dest, uint8_t source, uint8_t flags=0)</td></tr>
<tr class="separator:a04ae267662e9f3c4629f0e7469d387c7 inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b662ef5e3a10e28698df9f99e47505b inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a4b662ef5e3a10e28698df9f99e47505b">recvfromAck</a> (uint8_t *buf, uint8_t *len, uint8_t *source=NULL, uint8_t *dest=NULL, uint8_t *id=NULL, uint8_t *flags=NULL)</td></tr>
<tr class="separator:a4b662ef5e3a10e28698df9f99e47505b inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9674cd900d04bbdd0a475b8a936b0549 inherit pub_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a9674cd900d04bbdd0a475b8a936b0549">recvfromAckTimeout</a> (uint8_t *buf, uint8_t *len, uint16_t timeout, uint8_t *source=NULL, uint8_t *dest=NULL, uint8_t *id=NULL, uint8_t *flags=NULL)</td></tr>
<tr class="separator:a9674cd900d04bbdd0a475b8a936b0549 inherit pub_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classRHReliableDatagram"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classRHReliableDatagram')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classRHReliableDatagram.html">RHReliableDatagram</a></td></tr>
<tr class="memitem:a5b0df6c96476358f7a6acb8a5575fe8e inherit pub_methods_classRHReliableDatagram"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHReliableDatagram.html#a5b0df6c96476358f7a6acb8a5575fe8e">RHReliableDatagram</a> (<a class="el" href="classRHGenericDriver.html">RHGenericDriver</a> &amp;driver, uint8_t <a class="el" href="classRHDatagram.html#a4749623dde8ada6dc6e18b32e3e8ed8f">thisAddress</a>=0)</td></tr>
<tr class="separator:a5b0df6c96476358f7a6acb8a5575fe8e inherit pub_methods_classRHReliableDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ba123a53c34f0eb93bef0fe3f1cab0 inherit pub_methods_classRHReliableDatagram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHReliableDatagram.html#aa2ba123a53c34f0eb93bef0fe3f1cab0">setTimeout</a> (uint16_t timeout)</td></tr>
<tr class="separator:aa2ba123a53c34f0eb93bef0fe3f1cab0 inherit pub_methods_classRHReliableDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a527306673a822c91d19e91327f2d4a80 inherit pub_methods_classRHReliableDatagram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHReliableDatagram.html#a527306673a822c91d19e91327f2d4a80">setRetries</a> (uint8_t <a class="el" href="classRHReliableDatagram.html#ac6be14d9e660e1a4538376d4b4931d1d">retries</a>)</td></tr>
<tr class="separator:a527306673a822c91d19e91327f2d4a80 inherit pub_methods_classRHReliableDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6be14d9e660e1a4538376d4b4931d1d inherit pub_methods_classRHReliableDatagram"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHReliableDatagram.html#ac6be14d9e660e1a4538376d4b4931d1d">retries</a> ()</td></tr>
<tr class="separator:ac6be14d9e660e1a4538376d4b4931d1d inherit pub_methods_classRHReliableDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad282ac147986a63692582f323b56c47f inherit pub_methods_classRHReliableDatagram"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHReliableDatagram.html#ad282ac147986a63692582f323b56c47f">sendtoWait</a> (uint8_t *buf, uint8_t len, uint8_t address)</td></tr>
<tr class="separator:ad282ac147986a63692582f323b56c47f inherit pub_methods_classRHReliableDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af172410589842760babf938a0538334c inherit pub_methods_classRHReliableDatagram"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHReliableDatagram.html#af172410589842760babf938a0538334c">recvfromAck</a> (uint8_t *buf, uint8_t *len, uint8_t *from=NULL, uint8_t *to=NULL, uint8_t *id=NULL, uint8_t *flags=NULL)</td></tr>
<tr class="separator:af172410589842760babf938a0538334c inherit pub_methods_classRHReliableDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac72c7495936b6f655a5765faac609342 inherit pub_methods_classRHReliableDatagram"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHReliableDatagram.html#ac72c7495936b6f655a5765faac609342">recvfromAckTimeout</a> (uint8_t *buf, uint8_t *len, uint16_t timeout, uint8_t *from=NULL, uint8_t *to=NULL, uint8_t *id=NULL, uint8_t *flags=NULL)</td></tr>
<tr class="separator:ac72c7495936b6f655a5765faac609342 inherit pub_methods_classRHReliableDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ed110f1a6a8cbc8de3cd17a1a4cce5c inherit pub_methods_classRHReliableDatagram"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHReliableDatagram.html#a4ed110f1a6a8cbc8de3cd17a1a4cce5c">retransmissions</a> ()</td></tr>
<tr class="separator:a4ed110f1a6a8cbc8de3cd17a1a4cce5c inherit pub_methods_classRHReliableDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01ac6fe8be733e1ccc0791d5ef44bb13 inherit pub_methods_classRHReliableDatagram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHReliableDatagram.html#a01ac6fe8be733e1ccc0791d5ef44bb13">resetRetransmissions</a> ()</td></tr>
<tr class="separator:a01ac6fe8be733e1ccc0791d5ef44bb13 inherit pub_methods_classRHReliableDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classRHDatagram"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classRHDatagram')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classRHDatagram.html">RHDatagram</a></td></tr>
<tr class="memitem:ada6271bf28191c2368766785c6ba8b7a inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#ada6271bf28191c2368766785c6ba8b7a">RHDatagram</a> (<a class="el" href="classRHGenericDriver.html">RHGenericDriver</a> &amp;driver, uint8_t <a class="el" href="classRHDatagram.html#a4749623dde8ada6dc6e18b32e3e8ed8f">thisAddress</a>=0)</td></tr>
<tr class="separator:ada6271bf28191c2368766785c6ba8b7a inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe51be17fd7cc8db571c3b3ba2de0816 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#abe51be17fd7cc8db571c3b3ba2de0816">init</a> ()</td></tr>
<tr class="separator:abe51be17fd7cc8db571c3b3ba2de0816 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2031c32443b797b275245344c8a36ef1 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a2031c32443b797b275245344c8a36ef1">setThisAddress</a> (uint8_t <a class="el" href="classRHDatagram.html#a4749623dde8ada6dc6e18b32e3e8ed8f">thisAddress</a>)</td></tr>
<tr class="separator:a2031c32443b797b275245344c8a36ef1 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99894e3465aa607022cc240cc0394462 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a99894e3465aa607022cc240cc0394462">sendto</a> (uint8_t *buf, uint8_t len, uint8_t address)</td></tr>
<tr class="separator:a99894e3465aa607022cc240cc0394462 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76f519f91e9fd435e1c0be67ad999420 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a76f519f91e9fd435e1c0be67ad999420">recvfrom</a> (uint8_t *buf, uint8_t *len, uint8_t *from=NULL, uint8_t *to=NULL, uint8_t *id=NULL, uint8_t *flags=NULL)</td></tr>
<tr class="separator:a76f519f91e9fd435e1c0be67ad999420 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a118f5c8f0ac925335cea6f23d2063467 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a118f5c8f0ac925335cea6f23d2063467">available</a> ()</td></tr>
<tr class="separator:a118f5c8f0ac925335cea6f23d2063467 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99a90a3d35f6c579dab2a044417077a4 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a99a90a3d35f6c579dab2a044417077a4">waitAvailable</a> ()</td></tr>
<tr class="separator:a99a90a3d35f6c579dab2a044417077a4 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b453d9b83c4da71acc62eea77af3d73 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a3b453d9b83c4da71acc62eea77af3d73">waitPacketSent</a> ()</td></tr>
<tr class="separator:a3b453d9b83c4da71acc62eea77af3d73 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4a7d3b768b22518228d609dcce8dd0c inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#ae4a7d3b768b22518228d609dcce8dd0c">waitPacketSent</a> (uint16_t timeout)</td></tr>
<tr class="separator:ae4a7d3b768b22518228d609dcce8dd0c inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01757f63f461642e91065421702872a5 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a01757f63f461642e91065421702872a5">waitAvailableTimeout</a> (uint16_t timeout)</td></tr>
<tr class="separator:a01757f63f461642e91065421702872a5 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4d577cb119ed5a37d20d9cdbc30c942 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#aa4d577cb119ed5a37d20d9cdbc30c942">setHeaderTo</a> (uint8_t to)</td></tr>
<tr class="separator:aa4d577cb119ed5a37d20d9cdbc30c942 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02ceb5bb2662041ed26319d315845f37 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a02ceb5bb2662041ed26319d315845f37">setHeaderFrom</a> (uint8_t from)</td></tr>
<tr class="separator:a02ceb5bb2662041ed26319d315845f37 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aac12bf5bcc900eb525fa1676113803 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a4aac12bf5bcc900eb525fa1676113803">setHeaderId</a> (uint8_t id)</td></tr>
<tr class="separator:a4aac12bf5bcc900eb525fa1676113803 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10dca3a92476b8ab7728bf39632a44cd inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a10dca3a92476b8ab7728bf39632a44cd">setHeaderFlags</a> (uint8_t set, uint8_t clear=RH_FLAGS_NONE)</td></tr>
<tr class="separator:a10dca3a92476b8ab7728bf39632a44cd inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac24d1bedb469a506a51526341c3f0a58 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#ac24d1bedb469a506a51526341c3f0a58">headerTo</a> ()</td></tr>
<tr class="separator:ac24d1bedb469a506a51526341c3f0a58 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a216f6cafb7de91cc85af38dc6155c113 inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a216f6cafb7de91cc85af38dc6155c113">headerFrom</a> ()</td></tr>
<tr class="separator:a216f6cafb7de91cc85af38dc6155c113 inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1db8fccebe40bb24950b1d3a3013880d inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a1db8fccebe40bb24950b1d3a3013880d">headerId</a> ()</td></tr>
<tr class="separator:a1db8fccebe40bb24950b1d3a3013880d inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bb61fc918e1844ec24cb696ec8cd87b inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a7bb61fc918e1844ec24cb696ec8cd87b">headerFlags</a> ()</td></tr>
<tr class="separator:a7bb61fc918e1844ec24cb696ec8cd87b inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4749623dde8ada6dc6e18b32e3e8ed8f inherit pub_methods_classRHDatagram"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a4749623dde8ada6dc6e18b32e3e8ed8f">thisAddress</a> ()</td></tr>
<tr class="separator:a4749623dde8ada6dc6e18b32e3e8ed8f inherit pub_methods_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a6f5ea28b73f33c95f2658f3a72cf32fd"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHMesh.html#a6f5ea28b73f33c95f2658f3a72cf32fd">peekAtMessage</a> (<a class="el" href="structRHRouter_1_1RoutedMessage.html">RoutedMessage</a> *message, uint8_t messageLen)</td></tr>
<tr class="separator:a6f5ea28b73f33c95f2658f3a72cf32fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a006494be8fd2e2d7c160b58473714043"><td class="memItemLeft" align="right" valign="top">virtual uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHMesh.html#a006494be8fd2e2d7c160b58473714043">route</a> (<a class="el" href="structRHRouter_1_1RoutedMessage.html">RoutedMessage</a> *message, uint8_t messageLen)</td></tr>
<tr class="separator:a006494be8fd2e2d7c160b58473714043"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13cdddb49480defaf287bd3a7a16b298"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHMesh.html#a13cdddb49480defaf287bd3a7a16b298">doArp</a> (uint8_t address)</td></tr>
<tr class="separator:a13cdddb49480defaf287bd3a7a16b298"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd08b8de473c27b89ffaed2f9a0de09d"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHMesh.html#abd08b8de473c27b89ffaed2f9a0de09d">isPhysicalAddress</a> (uint8_t *address, uint8_t addresslen)</td></tr>
<tr class="separator:abd08b8de473c27b89ffaed2f9a0de09d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classRHRouter"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classRHRouter')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classRHRouter.html">RHRouter</a></td></tr>
<tr class="memitem:ab8b31ee5a0063c942c761554ceaf76d9 inherit pro_methods_classRHRouter"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#ab8b31ee5a0063c942c761554ceaf76d9">deleteRoute</a> (uint8_t index)</td></tr>
<tr class="separator:ab8b31ee5a0063c942c761554ceaf76d9 inherit pro_methods_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classRHReliableDatagram"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classRHReliableDatagram')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classRHReliableDatagram.html">RHReliableDatagram</a></td></tr>
<tr class="memitem:ad1ea9f35e98d248bf595563e52f66183 inherit pro_methods_classRHReliableDatagram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHReliableDatagram.html#ad1ea9f35e98d248bf595563e52f66183">acknowledge</a> (uint8_t id, uint8_t from)</td></tr>
<tr class="separator:ad1ea9f35e98d248bf595563e52f66183 inherit pro_methods_classRHReliableDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac66d102a7a344885b9d7f249f10ddd07 inherit pro_methods_classRHReliableDatagram"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHReliableDatagram.html#ac66d102a7a344885b9d7f249f10ddd07">haveNewMessage</a> ()</td></tr>
<tr class="separator:ac66d102a7a344885b9d7f249f10ddd07 inherit pro_methods_classRHReliableDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classRHRouter"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classRHRouter')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classRHRouter.html">RHRouter</a></td></tr>
<tr class="memitem:ad7f86ccf28df6efb61e39dbe8677fa11 inherit pub_types_classRHRouter"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#ad7f86ccf28df6efb61e39dbe8677fa11">RouteState</a> { <a class="el" href="classRHRouter.html#ad7f86ccf28df6efb61e39dbe8677fa11aa0ba8513b91dabb4b36282eda6eb29fa">Invalid</a> = 0, 
<a class="el" href="classRHRouter.html#ad7f86ccf28df6efb61e39dbe8677fa11a3fc4709e95021c4777c17ebd8d98aaec">Discovering</a>, 
<a class="el" href="classRHRouter.html#ad7f86ccf28df6efb61e39dbe8677fa11a99d4fdf872c93b39849991f8e7a555a8">Valid</a>
 }</td></tr>
<tr class="memdesc:ad7f86ccf28df6efb61e39dbe8677fa11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Values for the possible states for routes.  <a href="classRHRouter.html#ad7f86ccf28df6efb61e39dbe8677fa11">More...</a><br /></td></tr>
<tr class="separator:ad7f86ccf28df6efb61e39dbe8677fa11 inherit pub_types_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classRHRouter"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classRHRouter')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classRHRouter.html">RHRouter</a></td></tr>
<tr class="memitem:a2852f5ca78d9e8755e6bc7667fc1ddd9 inherit pro_attribs_classRHRouter"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a2852f5ca78d9e8755e6bc7667fc1ddd9">_lastE2ESequenceNumber</a></td></tr>
<tr class="separator:a2852f5ca78d9e8755e6bc7667fc1ddd9 inherit pro_attribs_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dca12add5fcf537c4345e57b1320b41 inherit pro_attribs_classRHRouter"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHRouter.html#a6dca12add5fcf537c4345e57b1320b41">_max_hops</a></td></tr>
<tr class="separator:a6dca12add5fcf537c4345e57b1320b41 inherit pro_attribs_classRHRouter"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classRHDatagram"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classRHDatagram')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classRHDatagram.html">RHDatagram</a></td></tr>
<tr class="memitem:a44cd19d6c10e3586f868556e3d6aa67e inherit pro_attribs_classRHDatagram"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a44cd19d6c10e3586f868556e3d6aa67e"></a>
<a class="el" href="classRHGenericDriver.html">RHGenericDriver</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#a44cd19d6c10e3586f868556e3d6aa67e">_driver</a></td></tr>
<tr class="memdesc:a44cd19d6c10e3586f868556e3d6aa67e inherit pro_attribs_classRHDatagram"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Driver we are to use. <br /></td></tr>
<tr class="separator:a44cd19d6c10e3586f868556e3d6aa67e inherit pro_attribs_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae61ea3f68f3365d03249fd5807e989bd inherit pro_attribs_classRHDatagram"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae61ea3f68f3365d03249fd5807e989bd"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRHDatagram.html#ae61ea3f68f3365d03249fd5807e989bd">_thisAddress</a></td></tr>
<tr class="memdesc:ae61ea3f68f3365d03249fd5807e989bd inherit pro_attribs_classRHDatagram"><td class="mdescLeft">&#160;</td><td class="mdescRight">The address of this node. <br /></td></tr>
<tr class="separator:ae61ea3f68f3365d03249fd5807e989bd inherit pro_attribs_classRHDatagram"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classRHRouter.html" title="RHReliableDatagram subclass for sending addressed, optionally acknowledged datagrams multi-hop routed...">RHRouter</a> subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a network, with automatic route discovery. </p>
<p>Manager class that extends <a class="el" href="classRHRouter.html" title="RHReliableDatagram subclass for sending addressed, optionally acknowledged datagrams multi-hop routed...">RHRouter</a> to add automatic route discovery within a mesh of adjacent nodes, and route signalling.</p>
<p>Unlike <a class="el" href="classRHRouter.html" title="RHReliableDatagram subclass for sending addressed, optionally acknowledged datagrams multi-hop routed...">RHRouter</a>, <a class="el" href="classRHMesh.html" title="RHRouter subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a ...">RHMesh</a> can be used in networks where the network topology is fluid, or unknown, or if nodes can mode around or go in or out of service. When a node wants to send a message to another node, it will automcatically discover a route to the destaintion node and use it. If the route becomes unavailable, a new route will be discovered.</p>
<dl class="section user"><dt>Route Discovery</dt><dd></dd></dl>
<p>When a <a class="el" href="classRHMesh.html" title="RHRouter subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a ...">RHMesh</a> mesh node is initialised, it doe not know any routes to any other nodes (see <a class="el" href="classRHRouter.html" title="RHReliableDatagram subclass for sending addressed, optionally acknowledged datagrams multi-hop routed...">RHRouter</a> for details on route and the routing table). When you attempt to send a message with sendtoWait, will first check to see if there is a route to the destinastion node in the routing tabl;e. If not, it wil initialite 'Route Discovery'. When a node needs to discover a route to another node, it broadcasts <a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html" title="Signals a route discovery request or reply (At present only supports physical dest addresses of lengt...">MeshRouteDiscoveryMessage</a> with a message type of RH_MESH_MESSAGE_TYPE_ROUTE_DISCOVERY_REQUEST. Any node that receives such a request checks to see if it is a request for a route to itself (in which case it makes a unicast reply to the originating node with a <a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html" title="Signals a route discovery request or reply (At present only supports physical dest addresses of lengt...">MeshRouteDiscoveryMessage</a> with a message type of RH_MESH_MESSAGE_TYPE_ROUTE_DISCOVERY_RESPONSE) otherwise it rebroadcasts the request, after adding itself to the list of nodes visited so far by the request.</p>
<p>If a node receives a RH_MESH_MESSAGE_TYPE_ROUTE_DISCOVERY_REQUEST that already has itself listed in the visited nodes, it knows it has already seen and rebroadcast this request, and threfore ignores it. This prevents broadcast storms. When a node receives a RH_MESH_MESSAGE_TYPE_ROUTE_DISCOVERY_REQUEST it can use the list of nodes aready visited to deduce routes back towards the originating (requesting node). This also means that when the destination node of the request is reached, it (and all the previous nodes the request visited) will have a route back to the originating node. This means the unicast RH_MESH_MESSAGE_TYPE_ROUTE_DISCOVERY_RESPONSE reply will be routed successfully back to the original route requester.</p>
<p>The RH_MESH_MESSAGE_TYPE_ROUTE_DISCOVERY_RESPONSE sent back by the destination node contains the full list of nodes that were visited on the way to the destination. Therefore, intermediate nodes that route the reply back towards the originating node can use the node list in the reply to deduce routes to all the nodes between it and the destination node.</p>
<p>Therefore, RH_MESH_MESSAGE_TYPE_ROUTE_DISCOVERY_REQUEST and RH_MESH_MESSAGE_TYPE_ROUTE_DISCOVERY_RESPONSE together ensure the original requester and all the intermediate nodes know how to route to the source and destination nodes and every node along the path.</p>
<p>Note that there is a race condition here that can effect routing on multipath routes. For example, if the route to the destination can traverse several paths, last reply from the destination will be the one used.</p>
<dl class="section user"><dt>Route Failure</dt><dd></dd></dl>
<p><a class="el" href="classRHRouter.html" title="RHReliableDatagram subclass for sending addressed, optionally acknowledged datagrams multi-hop routed...">RHRouter</a> (and therefore <a class="el" href="classRHMesh.html" title="RHRouter subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a ...">RHMesh</a>) use reliable hop-to-hop delivery of messages using hop-to-hop acknowledgements, but not end-to-end acknowledgements. When <a class="el" href="classRHMesh.html#a9dcb42be25d06b69a85e27189822fbc6">sendtoWait()</a> returns, you know that the message has been delivered to the next hop, but not if it is (or even if it can be) delivered to the destination node. If during the course of hop-to-hop routing of a message, one of the intermediate <a class="el" href="classRHMesh.html" title="RHRouter subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a ...">RHMesh</a> nodes finds it cannot deliver to the next hop (say due to a lost route or no acknwledgement from the next hop), it replies to the originator with a unicast <a class="el" href="structRHMesh_1_1MeshRouteFailureMessage.html" title="Signals a route failure. ">MeshRouteFailureMessage</a> RH_MESH_MESSAGE_TYPE_ROUTE_FAILURE message. Intermediate nodes (on the way beack to the originator) and the originating node use this message to delete the route to the destination node of the original message. This means that if a route to a destination becomes unusable (either because an intermediate node is off the air, or has moved out of range) a new route will be established the next time a message is to be sent.</p>
<dl class="section user"><dt>Message Format</dt><dd></dd></dl>
<p><a class="el" href="classRHMesh.html" title="RHRouter subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a ...">RHMesh</a> uses a number of message formats layered on top of <a class="el" href="classRHRouter.html" title="RHReliableDatagram subclass for sending addressed, optionally acknowledged datagrams multi-hop routed...">RHRouter</a>:</p><ul>
<li><a class="el" href="structRHMesh_1_1MeshApplicationMessage.html" title="Signals an application layer message for the caller of RHMesh. ">MeshApplicationMessage</a> (message type RH_MESH_MESSAGE_TYPE_APPLICATION). Carries an application layer message for the caller of <a class="el" href="classRHMesh.html" title="RHRouter subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a ...">RHMesh</a></li>
<li><a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html" title="Signals a route discovery request or reply (At present only supports physical dest addresses of lengt...">MeshRouteDiscoveryMessage</a> (message types RH_MESH_MESSAGE_TYPE_ROUTE_DISCOVERY_REQUEST and RH_MESH_MESSAGE_TYPE_ROUTE_DISCOVERY_RESPONSE). Carries Route Discovery messages (broadcast) and replies (unicast).</li>
<li><a class="el" href="structRHMesh_1_1MeshRouteFailureMessage.html" title="Signals a route failure. ">MeshRouteFailureMessage</a> (message type RH_MESH_MESSAGE_TYPE_ROUTE_FAILURE) Informs nodes of route failures.</li>
</ul>
<p>Part of the Arduino RH library for operating with HopeRF RH compatible transceivers (see <a href="http://www.hoperf.com">http://www.hoperf.com</a>)</p>
<dl class="section user"><dt>Memory</dt><dd></dd></dl>
<p><a class="el" href="classRHMesh.html" title="RHRouter subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a ...">RHMesh</a> programs require significant amount of SRAM, often approaching 2kbytes, which is beyond or at the limits of some Arduinos and other processors. Programs with additional software besides basic <a class="el" href="classRHMesh.html" title="RHRouter subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a ...">RHMesh</a> programs may well require even more. If you have insufficient SRAM for your program, it may result in failure to run, or wierd crashes and other hard to trace behaviour. In this event you should consider a processor with more SRAM, such as the MotienoMEGA with 16k (<a href="https://lowpowerlab.com/shop/moteinomega">https://lowpowerlab.com/shop/moteinomega</a>) or others. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a5a6e3fc56274ba3dc6bbb569dae83adf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RHMesh::RHMesh </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRHGenericDriver.html">RHGenericDriver</a> &amp;&#160;</td>
          <td class="paramname"><em>driver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>thisAddress</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">driver</td><td>The RadioHead driver to use to transport messages. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thisAddress</td><td>The address to assign to this node. Defaults to 0 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a13cdddb49480defaf287bd3a7a16b298"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool RHMesh::doArp </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Try to resolve a route for the given address. Blocks while discovering the route which may take up to 4000 msec. Virtual so subclasses can override. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>The physical address to resolve </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the address was resolved and added to the local routing table </dd></dl>

<p>References <a class="el" href="classRHRouter.html#a82c639a2d6bb32d0f86f63da12baa7bd">RHRouter::addRouteTo()</a>, <a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html#a40ae2ac403a2dd2abd99e233cce87400">RHMesh::MeshRouteDiscoveryMessage::dest</a>, <a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html#a9db6a6b9485cb762e365d8b0b6f2bf14">RHMesh::MeshRouteDiscoveryMessage::destlen</a>, <a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html#a7ab3b7713df900b7851a7d376b09e597">RHMesh::MeshRouteDiscoveryMessage::header</a>, <a class="el" href="classRHDatagram.html#a216f6cafb7de91cc85af38dc6155c113">RHDatagram::headerFrom()</a>, <a class="el" href="structRHMesh_1_1MeshMessageHeader.html#adfd96b4d617f39ad222151c258e263b9">RHMesh::MeshMessageHeader::msgType</a>, <a class="el" href="classRHRouter.html#a4b662ef5e3a10e28698df9f99e47505b">RHRouter::recvfromAck()</a>, and <a class="el" href="classRHRouter.html#a7ac935defd2418f45a4d9f391f7e0384">RHRouter::sendtoWait()</a>.</p>

<p>Referenced by <a class="el" href="classRHMesh.html#a9dcb42be25d06b69a85e27189822fbc6">sendtoWait()</a>.</p>

</div>
</div>
<a class="anchor" id="abd08b8de473c27b89ffaed2f9a0de09d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool RHMesh::isPhysicalAddress </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addresslen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tests if the given address of length addresslen is indentical to the physical address of this node. <a class="el" href="classRHMesh.html" title="RHRouter subclass for sending addressed, optionally acknowledged datagrams multi-hop routed across a ...">RHMesh</a> always ikmplements p[hysical addresses as the 1 octet address of the node given by _thisAddress Called by <a class="el" href="classRHMesh.html#ae39d1157f0fbf26a6a9457aaefcc7092">recvfromAck()</a> to test whether a RH_MESH_MESSAGE_TYPE_ROUTE_DISCOVERY_REQUEST is for this node. Subclasses may want to override to implement more complicated or longer physical addresses </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>Address of the pyysical addres being tested </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addresslen</td><td>Lengthof the address in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the physical address of this node is identical to address </dd></dl>

<p>References <a class="el" href="classRHDatagram.html#ae61ea3f68f3365d03249fd5807e989bd">RHDatagram::_thisAddress</a>.</p>

<p>Referenced by <a class="el" href="classRHMesh.html#ae39d1157f0fbf26a6a9457aaefcc7092">recvfromAck()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f5ea28b73f33c95f2658f3a72cf32fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void RHMesh::peekAtMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRHRouter_1_1RoutedMessage.html">RoutedMessage</a> *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>messageLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Internal function that inspects messages being received and adjusts the routing table if necessary. Called by <a class="el" href="classRHMesh.html#ae39d1157f0fbf26a6a9457aaefcc7092">recvfromAck()</a> immediately after it gets the message from <a class="el" href="classRHReliableDatagram.html" title="RHDatagram subclass for sending addressed, acknowledged, retransmitted datagrams. ...">RHReliableDatagram</a> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>Pointer to the <a class="el" href="classRHRouter.html" title="RHReliableDatagram subclass for sending addressed, optionally acknowledged datagrams multi-hop routed...">RHRouter</a> message that was received. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">messageLen</td><td>Length of message in octets </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classRHRouter.html#ad917493856048d0fde6558b8d2f16d56">RHRouter</a>.</p>

<p>References <a class="el" href="classRHDatagram.html#ae61ea3f68f3365d03249fd5807e989bd">RHDatagram::_thisAddress</a>, <a class="el" href="classRHRouter.html#a82c639a2d6bb32d0f86f63da12baa7bd">RHRouter::addRouteTo()</a>, <a class="el" href="structRHRouter_1_1RoutedMessage.html#a8c0a9589831bed731ac5f7aab7c1fa7e">RHRouter::RoutedMessage::data</a>, <a class="el" href="classRHRouter.html#a70bff09a403c8f6203ccf484f2ebc581">RHRouter::deleteRouteTo()</a>, <a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html#a40ae2ac403a2dd2abd99e233cce87400">RHMesh::MeshRouteDiscoveryMessage::dest</a>, <a class="el" href="structRHMesh_1_1MeshRouteFailureMessage.html#a29982988bac1f4e45f1164f08780075e">RHMesh::MeshRouteFailureMessage::dest</a>, <a class="el" href="classRHDatagram.html#a216f6cafb7de91cc85af38dc6155c113">RHDatagram::headerFrom()</a>, <a class="el" href="structRHMesh_1_1MeshMessageHeader.html#adfd96b4d617f39ad222151c258e263b9">RHMesh::MeshMessageHeader::msgType</a>, and <a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html#a06e1f8c5b08abde9e565611ce54feb1f">RHMesh::MeshRouteDiscoveryMessage::route</a>.</p>

</div>
</div>
<a class="anchor" id="ae39d1157f0fbf26a6a9457aaefcc7092"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RHMesh::recvfromAck </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>source</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dest</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>id</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>flags</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts the receiver if it is not running already. If there is a valid application layer message available for this node (or RH_BROADCAST_ADDRESS), send an acknowledgement to the last hop address (blocking until this is complete), then copy the application message payload data to buf and return true else return false. If a message is copied, *len is set to the length.. If from is not NULL, the originator SOURCE address is placed in *source. If to is not NULL, the DEST address is placed in *dest. This might be this nodes address or RH_BROADCAST_ADDRESS. This is the preferred function for getting messages addressed to this node. If the message is not a broadcast, acknowledge to the sender before returning. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Location to copy the received message </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">len</td><td>Available space in buf. Set to the actual number of octets copied. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">source</td><td>If present and not NULL, the referenced uint8_t will be set to the SOURCE address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>If present and not NULL, the referenced uint8_t will be set to the DEST address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>If present and not NULL, the referenced uint8_t will be set to the ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>If present and not NULL, the referenced uint8_t will be set to the FLAGS (not just those addressed to this node). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a valid message was received for this node and copied to buf </dd></dl>

<p>References <a class="el" href="classRHRouter.html#a6dca12add5fcf537c4345e57b1320b41">RHRouter::_max_hops</a>, <a class="el" href="classRHDatagram.html#ae61ea3f68f3365d03249fd5807e989bd">RHDatagram::_thisAddress</a>, <a class="el" href="classRHRouter.html#a82c639a2d6bb32d0f86f63da12baa7bd">RHRouter::addRouteTo()</a>, <a class="el" href="structRHMesh_1_1MeshApplicationMessage.html#a50c4423baf447b1a13602e1f42362e46">RHMesh::MeshApplicationMessage::data</a>, <a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html#a40ae2ac403a2dd2abd99e233cce87400">RHMesh::MeshRouteDiscoveryMessage::dest</a>, <a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html#a9db6a6b9485cb762e365d8b0b6f2bf14">RHMesh::MeshRouteDiscoveryMessage::destlen</a>, <a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html#a7ab3b7713df900b7851a7d376b09e597">RHMesh::MeshRouteDiscoveryMessage::header</a>, <a class="el" href="classRHDatagram.html#a216f6cafb7de91cc85af38dc6155c113">RHDatagram::headerFrom()</a>, <a class="el" href="classRHMesh.html#abd08b8de473c27b89ffaed2f9a0de09d">isPhysicalAddress()</a>, <a class="el" href="structRHMesh_1_1MeshMessageHeader.html#adfd96b4d617f39ad222151c258e263b9">RHMesh::MeshMessageHeader::msgType</a>, <a class="el" href="classRHRouter.html#a4b662ef5e3a10e28698df9f99e47505b">RHRouter::recvfromAck()</a>, <a class="el" href="structRHMesh_1_1MeshRouteDiscoveryMessage.html#a06e1f8c5b08abde9e565611ce54feb1f">RHMesh::MeshRouteDiscoveryMessage::route</a>, <a class="el" href="classRHRouter.html#a04ae267662e9f3c4629f0e7469d387c7">RHRouter::sendtoFromSourceWait()</a>, and <a class="el" href="classRHRouter.html#a7ac935defd2418f45a4d9f391f7e0384">RHRouter::sendtoWait()</a>.</p>

<p>Referenced by <a class="el" href="classRHMesh.html#ad9865f97a80de0566d892286fb0be069">recvfromAckTimeout()</a>.</p>

</div>
</div>
<a class="anchor" id="ad9865f97a80de0566d892286fb0be069"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RHMesh::recvfromAckTimeout </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>source</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dest</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>id</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>flags</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts the receiver if it is not running already. Similar to <a class="el" href="classRHMesh.html#ae39d1157f0fbf26a6a9457aaefcc7092">recvfromAck()</a>, this will block until either a valid application layer message available for this node or the timeout expires. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Location to copy the received message </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">len</td><td>Available space in buf. Set to the actual number of octets copied. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Maximum time to wait in milliseconds </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">source</td><td>If present and not NULL, the referenced uint8_t will be set to the SOURCE address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>If present and not NULL, the referenced uint8_t will be set to the DEST address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>If present and not NULL, the referenced uint8_t will be set to the ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>If present and not NULL, the referenced uint8_t will be set to the FLAGS (not just those addressed to this node). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a valid message was copied to buf </dd></dl>

<p>References <a class="el" href="classRHMesh.html#ae39d1157f0fbf26a6a9457aaefcc7092">recvfromAck()</a>.</p>

</div>
</div>
<a class="anchor" id="a006494be8fd2e2d7c160b58473714043"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t RHMesh::route </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRHRouter_1_1RoutedMessage.html">RoutedMessage</a> *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>messageLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Internal function that inspects messages being received and adjusts the routing table if necessary. This is virtual, which lets subclasses override or intercept the <a class="el" href="classRHMesh.html#a006494be8fd2e2d7c160b58473714043">route()</a> function. Called by sendtoWait after the message header has been filled in. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>Pointer to the <a class="el" href="classRHRouter.html" title="RHReliableDatagram subclass for sending addressed, optionally acknowledged datagrams multi-hop routed...">RHRouter</a> message to be sent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">messageLen</td><td>Length of message in octets </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classRHRouter.html#ab1a1865fe4de73356af8646a6cd9b8c8">RHRouter</a>.</p>

<p>References <a class="el" href="classRHDatagram.html#ae61ea3f68f3365d03249fd5807e989bd">RHDatagram::_thisAddress</a>, <a class="el" href="classRHRouter.html#a82c639a2d6bb32d0f86f63da12baa7bd">RHRouter::addRouteTo()</a>, <a class="el" href="classRHRouter.html#a70bff09a403c8f6203ccf484f2ebc581">RHRouter::deleteRouteTo()</a>, <a class="el" href="structRHRouter_1_1RoutedMessageHeader.html#a3e46e02ee0c182decdc18c2402bcbc88">RHRouter::RoutedMessageHeader::dest</a>, <a class="el" href="structRHMesh_1_1MeshRouteFailureMessage.html#a29982988bac1f4e45f1164f08780075e">RHMesh::MeshRouteFailureMessage::dest</a>, <a class="el" href="structRHMesh_1_1MeshRouteFailureMessage.html#ad1ca75a80740922e6fdbc83060bd1905">RHMesh::MeshRouteFailureMessage::header</a>, <a class="el" href="structRHRouter_1_1RoutedMessage.html#a93b7d35b4a7cab97bc6bf199e4f038f5">RHRouter::RoutedMessage::header</a>, <a class="el" href="classRHDatagram.html#a216f6cafb7de91cc85af38dc6155c113">RHDatagram::headerFrom()</a>, <a class="el" href="structRHMesh_1_1MeshMessageHeader.html#adfd96b4d617f39ad222151c258e263b9">RHMesh::MeshMessageHeader::msgType</a>, <a class="el" href="classRHRouter.html#ab1a1865fe4de73356af8646a6cd9b8c8">RHRouter::route()</a>, <a class="el" href="classRHRouter.html#a7ac935defd2418f45a4d9f391f7e0384">RHRouter::sendtoWait()</a>, and <a class="el" href="structRHRouter_1_1RoutedMessageHeader.html#a450bc6da3974b92be180222dbd47c4a4">RHRouter::RoutedMessageHeader::source</a>.</p>

<p>Referenced by <a class="el" href="classRHMesh.html#a9dcb42be25d06b69a85e27189822fbc6">sendtoWait()</a>.</p>

</div>
</div>
<a class="anchor" id="a9dcb42be25d06b69a85e27189822fbc6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t RHMesh::sendtoWait </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends a message to the destination node. Initialises the <a class="el" href="classRHRouter.html" title="RHReliableDatagram subclass for sending addressed, optionally acknowledged datagrams multi-hop routed...">RHRouter</a> message header (the SOURCE address is set to the address of this node, HOPS to 0) and calls <a class="el" href="classRHMesh.html#a006494be8fd2e2d7c160b58473714043">route()</a> which looks up in the routing table the next hop to deliver to. If no route is known, initiates route discovery and waits for a reply. Then sends the message to the next hop Then waits for an acknowledgement from the next hop (but not from the destination node (if that is different). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>The application message data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Number of octets in the application message data. 0 is permitted </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>The destination node address. If the address is RH_BROADCAST_ADDRESS (255) the message will be broadcast to all the nearby nodes, but not routed or relayed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Optional flags for use by subclasses or application layer, delivered end-to-end to the dest address. The receiver can recover the flags with recvFromAck(). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result code:<ul>
<li>RH_ROUTER_ERROR_NONE Message was routed and delivered to the next hop (not necessarily to the final dest address)</li>
<li>RH_ROUTER_ERROR_NO_ROUTE There was no route for dest in the local routing table</li>
<li>RH_ROUTER_ERROR_UNABLE_TO_DELIVER Not able to deliver to the next hop (usually because it dod not acknowledge due to being off the air or out of range </li>
</ul>
</dd></dl>

<p>References <a class="el" href="structRHMesh_1_1MeshApplicationMessage.html#a50c4423baf447b1a13602e1f42362e46">RHMesh::MeshApplicationMessage::data</a>, <a class="el" href="classRHMesh.html#a13cdddb49480defaf287bd3a7a16b298">doArp()</a>, <a class="el" href="classRHRouter.html#af9963186db7d5b88c4e6c212ffe2b07b">RHRouter::getRouteTo()</a>, <a class="el" href="structRHMesh_1_1MeshApplicationMessage.html#affb5ee0715879116a6e99e085c0176c1">RHMesh::MeshApplicationMessage::header</a>, <a class="el" href="structRHMesh_1_1MeshMessageHeader.html#adfd96b4d617f39ad222151c258e263b9">RHMesh::MeshMessageHeader::msgType</a>, <a class="el" href="classRHMesh.html#a006494be8fd2e2d7c160b58473714043">route()</a>, and <a class="el" href="classRHRouter.html#a7ac935defd2418f45a4d9f391f7e0384">RHRouter::sendtoWait()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="RHMesh_8h_source.html">RHMesh.h</a></li>
<li>RHMesh.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
